<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div>
      <h1>Dashboard</h1>
      <p class="subtitle">Overview of your store</p>
    </div>
    <button class="btn-primary" (click)="generateReport()">
      <lucide-icon name="file-text" size="18"></lucide-icon>
      Generate Report
    </button>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    @for (stat of stats; track $index) {
      <div class="stat-card">
        <div class="stat-content">
          <lucide-icon
            [name]="stat.icon"
            class="stat-icon"
            size="32"
          [style.color]="stat.color"></lucide-icon>
          <p class="stat-title">{{ stat.title }}</p>
          <p class="stat-value">{{ stat.value }}</p>
        </div>
      </div>
    }
  </div>

  <!-- Main Content Grid -->
  <div class="content-grid">
    <!-- Recent Activity -->
    <div class="card activity-card">
      <div class="card-header">
        <h2>Recent Activity</h2>
      </div>
      <div class="activity-list">
        @for (activity of activities; track activity) {
          <div class="activity-item">
            <lucide-icon
              [name]="getActivityIcon(activity.type)"
              class="activity-icon"
            size="24"></lucide-icon>
            <div class="activity-info">
              <p class="activity-description">{{ activity.description }}</p>
              <p class="activity-time">{{ activity.timestamp }}</p>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="card quick-actions-card">
      <div class="card-header">
        <h2>Quick Actions</h2>
      </div>
      <div class="actions-grid">
        <button class="action-btn" (click)="addNewProduct()">
          <lucide-icon name="plus" class="action-icon" size="24"></lucide-icon>
          Add Product
        </button>
        <button class="action-btn" (click)="navigate('orders')">
          <lucide-icon name="shopping-cart" class="action-icon" size="24"></lucide-icon>
          View Orders
        </button>
        <button class="action-btn" (click)="navigate('analytics')">
          <lucide-icon name="chart-no-axes-combined" class="action-icon" size="24"></lucide-icon>
          Reports
        </button>
        <button class="action-btn" (click)="navigate('profile')">
          <lucide-icon name="settings" class="action-icon" size="24"></lucide-icon>
          Settings
        </button>
        <button class="action-btn" (click)="navigateToNewOrder()">
          <lucide-icon name="logs" class="action-icon" size="24"></lucide-icon>
          New Order
        </button>
      </div>
    </div>

    <!-- Generate Report Modal -->
  </div>
  @if (showReportModal) {
    <div class="modal-overlay" (click)="closeReportModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>
            <lucide-icon name="file-text" size="24"></lucide-icon>
            Generate Business Report
          </h2>
          <button class="btn-close" (click)="closeReportModal()">
            <lucide-icon name="x" size="24"></lucide-icon>
          </button>
        </div>
  
        <div class="modal-body">
          <p class="modal-description">
            Generate a comprehensive business report including sales data, top products, and order statistics.
          </p>
  
          <div class="form-group">
            <label for="reportPeriod">Report Period</label>
            <select 
              id="reportPeriod" 
              [(ngModel)]="reportPeriod" 
              class="form-select"
            >
              <option *ngFor="let period of reportPeriods" [value]="period.value">
                {{ period.label }}
              </option>
            </select>
          </div>
  
          <div class="report-preview">
            <h4>Report will include:</h4>
            <ul>
              <li><lucide-icon name="check" size="16"></lucide-icon> Revenue breakdown</li>
              <li><lucide-icon name="check" size="16"></lucide-icon> Order statistics</li>
              <li><lucide-icon name="check" size="16"></lucide-icon> Top selling products</li>
              <li><lucide-icon name="check" size="16"></lucide-icon> Customer activity</li>
            </ul>
          </div>
        </div>
  
        <div class="modal-footer">
          <button type="button" class="btn-secondary" (click)="closeReportModal()">
            Cancel
          </button>
          <button type="button" class="btn-primary" (click)="downloadReport()" [disabled]="isGeneratingReport">
            @if (isGeneratingReport) {
              <span class="spinner-small"></span>
              Generating...
            } @else {
              <lucide-icon name="download" size="18"></lucide-icon>
              Download Report
            }
          </button>
        </div>
      </div>
    </div>
  }
</div>
